(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,a){e.exports=a(69)},65:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(32),c=a.n(r),i=a(33),l=a(5),o=a(18),u=(a(44),a(4)),m=a.n(u),d=a(16),p=a(10),h=a(11),f=a(13),g=a(12),b=a(14),E=a(23),v=a.n(E);v.a.initializeApp({apiKey:"AIzaSyBJrva6JPENwznkzeqqIwiCLhIlK-8k3w0",authDomain:"terracetask.firebaseapp.com",databaseURL:"https://terracetask.firebaseio.com",projectId:"terracetask",storageBucket:"terracetask.appspot.com",messagingSenderId:"739298815265",appId:"1:739298815265:web:e8909b33947197f7"}),v.a.firestore().settings({timestampsInSnapshots:!0});var k=v.a,y=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).componentDidMount=Object(d.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.firestore().collection("Tasks").doc(a.props.match.params.id);case 2:return t=e.sent,e.next=5,t.get().then(function(e){if(e.exists){var t=e.data();a.setState({key:e.id,title:t.title,status:t.status,url:t.image_url,image_name:t.image_name})}else console.log("No such document!")});case 5:case"end":return e.stop()}},e)})),a.onChange=function(e){var t=a.state;t[e.target.name]=e.target.value,a.setState({task:t})},a.onChangeImage=function(e){a.setState({image:e.target.files[0]})},a.onSubmit=function(){var e=Object(d.a)(m.a.mark(function e(t){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,k.firestore().collection("Tasks").doc(a.props.match.params.id).update({title:a.state.title,status:a.state.status});case 3:a.state.image.name&&(n=k.storage(),n.ref("images/".concat(a.state.image.name)).put(a.state.image).on("state_changed",function(e){},function(e){console.log(e)},Object(d.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.ref("images").child(a.state.image.name).getDownloadURL().then(function(e){k.firestore().collection("Tasks").doc(a.props.match.params.id).update({image_url:e,image_name:a.state.image.name})});case 2:case"end":return e.stop()}},e)})))),a.props.history.push("/list");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={key:"",title:"",status:"",image:"",url:"",image_name:""},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{class:"container"},s.a.createElement("div",{class:"panel panel-default"},s.a.createElement("div",{class:"panel-heading"},s.a.createElement("h3",{class:"panel-title"},"EDIT TASK")),s.a.createElement("div",{class:"panel-body"},s.a.createElement("h4",null,s.a.createElement(l.b,{to:"/show/".concat(this.state.key),class:"btn btn-primary"},"Show Details")),s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("div",{class:"form-group"},s.a.createElement("label",{for:"title"},"Title:"),s.a.createElement("input",{type:"text",class:"form-control",name:"title",value:this.state.title,onChange:this.onChange,placeholder:"Title"})),s.a.createElement("div",{class:"form-group"},s.a.createElement("label",{for:"status"},"Status:"),s.a.createElement("input",{type:"text",class:"form-control",name:"status",value:this.state.status,onChange:this.onChange})),s.a.createElement("div",{class:"form-group"},s.a.createElement("label",null,"Image:",this.state.image_name),s.a.createElement("input",{type:"file",accept:"image/*",class:"form-control",onChange:this.onChangeImage})),s.a.createElement("button",{type:"submit",class:"btn btn-success"},"Submit")))))}}]),t}(n.Component),S=(a(62),a(15)),O=a.n(S),j=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).componentDidMount=function(){var e=O.a.get("UID");a.setState({uid:e})},a.onChange=function(e){var t=a.state;t[e.target.name]=e.target.value,a.setState(t)},a.onChangeImage=function(e){a.setState({image:e.target.files[0]})},a.onSubmit=function(e){e.preventDefault();var t=k.storage();a.setState({isSubmitting:!0});var n=a.state.uid,s=a.state,r=s.title,c=s.status;t.ref("images/".concat(a.state.image.name)).put(a.state.image).on("state_changed",function(e){},function(e){console.log(e)},Object(d.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.ref("images").child(a.state.image.name).getDownloadURL().then(function(e){a.setState({url:e},function(){var e=a.state.url,t=a.state.image.name;a.ref.add({UID:n,title:r,status:c,image_url:e,image_name:t}).then(function(e){a.setState({title:"",status:"",url:""}),a.props.history.push("/list")}).catch(function(e){console.error("Error adding document: ",e)})})});case 2:case"end":return e.stop()}},e)})))},a.renderLoading=function(){if(a.state.isSubmitting)return s.a.createElement("div",{class:"spinner-border text-primary",role:"status"},s.a.createElement("span",{class:"sr-only"},"Loading..."))},a.ref=k.firestore().collection("Tasks"),a.state={title:"",status:"",image:"",url:"",isSubmitting:!1,uid:""},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.status;return s.a.createElement("div",{class:"container"},s.a.createElement("div",{class:"panel panel-default"},s.a.createElement("div",{class:"panel-heading"},s.a.createElement("h3",{class:"panel-title"},"ADD TASK")),s.a.createElement("div",{class:"panel-body"},s.a.createElement("h4",null,s.a.createElement(l.b,{to:"/list",class:"btn btn-primary"},"Tasks List")),s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("div",{class:"form-group"},s.a.createElement("label",{for:"title"},"Title:"),s.a.createElement("input",{type:"text",class:"form-control",name:"title",value:t,onChange:this.onChange,placeholder:"Title"})),s.a.createElement("div",{class:"form-group"},s.a.createElement("label",{for:"status"},"Status:"),s.a.createElement("input",{class:"form-control",name:"status",onChange:this.onChange,placeholder:"Status",value:a})),s.a.createElement("div",{class:"form-group"},s.a.createElement("label",{for:"image"},"Image:"),s.a.createElement("input",{type:"file",accept:"image/*",class:"form-control",onChange:this.onChangeImage})),s.a.createElement("button",{type:"submit",class:"btn btn-success"},"Submit")))),this.renderLoading())}}]),t}(n.Component),I=(a(65),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).componentDidMount=Object(d.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.firestore().collection("Tasks").doc(a.props.match.params.id);case 2:return t=e.sent,e.next=5,t.get().then(function(e){e.exists?a.setState({task:e.data(),key:e.id,isLoading:!1}):console.log("No such document!")});case 5:case"end":return e.stop()}},e)})),a.delete=function(){var e=Object(d.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.firestore().collection("Tasks").doc(t).delete().then(function(){console.log("Document successfully deleted!"),a.props.history.push("/list")}).catch(function(e){console.error("Error removing document: ",e)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={task:{},key:""},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{class:"container"},s.a.createElement("div",{class:"panel panel-default"},s.a.createElement("div",{class:"panel-heading"},s.a.createElement("h4",null,s.a.createElement(l.b,{to:"/list"},"Task List"))),s.a.createElement("div",{class:"panel-body"},s.a.createElement("div",{className:"details"},s.a.createElement("img",{src:this.state.task.image_url,alt:""}),s.a.createElement("div",{className:"details_div"},s.a.createElement("span",null,"Title : ",this.state.task.title),s.a.createElement("br",null),s.a.createElement("span",null,"Status : ",this.state.task.status))),s.a.createElement(l.b,{to:"/edit/".concat(this.state.key),class:"btn btn-success"},"Edit"),"\xa0",s.a.createElement("button",{onClick:this.delete.bind(this,this.state.key),class:"btn btn-danger"},"Delete"))))}}]),t}(n.Component)),w=a(22),C=a(37),D=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={UID:""},a.getUiConfig=function(e){var t=Object(w.a)(a);return{callbacks:{signInSuccess:function(e,a,n){return t.props.history.push("/list"),!1}},signInFlow:"popup",signInOptions:[{provider:k.auth.PhoneAuthProvider.PROVIDER_ID,recaptchaParameters:{type:"",size:"invisible",badge:""},defaultCountry:"IN",defaultNationalNumber:"",loginHint:""}]}},a.handleSignedOutUser=function(){document.getElementById("user-signed-out").style.display="block",a.ui.start("#firebaseui-container",a.getUiConfig())},a.ui=new C.a.AuthUI(k.auth()),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.auth().onAuthStateChanged(function(t){t?O.a.set("UID",t.uid):e.handleSignedOutUser()})}},{key:"render",value:function(){return s.a.createElement("div",{id:"container"},s.a.createElement("div",{id:"loaded",class:"hidden"},s.a.createElement("div",{id:"main"},s.a.createElement("div",{id:"user-signed-out",class:"hidden"},s.a.createElement("div",{id:"firebaseui-spa"},s.a.createElement("div",{id:"firebaseui-container"}))))))}}]),t}(n.Component),x=Object(o.g)(D),T=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).onCollectionUpdate=function(e){var t=[];e.forEach(function(e){if(e.data().UID===O.a.get("UID")){var n=e.data(),s=n.title,r=n.status,c=n.image;t.push({key:e.id,doc:e,title:s,status:r,image:c}),a.setState({tasks:t})}}),console.log(a.state.tasks)},a.initApp=function(){k.auth().signOut().then(function(){console.log("Signed Out")},function(e){console.error("Sign Out Error",e)}),a.props.history.push("/")},a.ref=k.firestore().collection("Tasks"),a.unsubscribe=null,a.state={tasks:[]},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){console.log(O.a.get("UID")),this.unsubscribe=this.ref.onSnapshot(this.onCollectionUpdate)}},{key:"render",value:function(){return s.a.createElement("div",{class:"container"},s.a.createElement("div",{class:"panel panel-default"},s.a.createElement("div",{class:"panel-heading"},s.a.createElement("h3",{class:"panel-title"},"TASKS LIST"),s.a.createElement("button",{onClick:this.initApp},"Signout")),s.a.createElement("div",{class:"panel-body"},s.a.createElement("h4",null,s.a.createElement(l.b,{to:"/create"},"Add Task")),s.a.createElement("table",{class:"table table-stripe"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Title"),s.a.createElement("th",null,"Status"))),s.a.createElement("tbody",null,this.state.tasks.map(function(e){return s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement(l.b,{to:"/show/".concat(e.key)},e.title)),s.a.createElement("td",null,e.status))}))))))}}]),t}(n.Component);var U=function(e){var t=e.component,a=Object(i.a)(e,["component"]);return s.a.createElement(o.b,Object.assign({},a,{render:function(e){return O.a.get("UID")?s.a.createElement(t,e):s.a.createElement(o.a,{to:{pathname:"/",state:{from:e.location}}})}}))},_=function(){return s.a.createElement(l.a,null,s.a.createElement("div",null,s.a.createElement(o.d,null,s.a.createElement(o.b,{exact:!0,path:"/",component:x}),s.a.createElement(U,{path:"/list",component:T}),s.a.createElement(U,{path:"/edit/:id",component:y}),s.a.createElement(U,{path:"/create",component:j}),s.a.createElement(U,{path:"/show/:id",component:I}))))};c.a.render(s.a.createElement(_,null),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.1653e612.chunk.js.map